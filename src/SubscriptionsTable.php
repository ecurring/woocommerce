<?php

namespace eCurring\WooEcurring;

use eCurring_WC_Helper_Api;
use WP_List_Table;

class SubscriptionsTable extends WP_List_Table
{
    /**
     * @var eCurring_WC_Helper_Api
     */
    protected $apiHelper;

    public function __construct(eCurring_WC_Helper_Api $apiHelper, $args = array())
    {
        parent::__construct($args);

        $this->apiHelper = $apiHelper;
    }

    /**
     * @return void
     */
    public function prepare_items()
    {
        $columns = $this->get_columns();
        $hidden = $this->get_hidden_columns();
        $sortable = $this->get_sortable_columns();

        //$response = $this->apiHelper->apiCall('GET', 'https://api.ecurring.com/subscriptions');
//        $response = '{"meta":{"total":10},"links":{"self":"https:\/\/api.ecurring.com\/subscriptions?page[number]=1&page[size]=10","first":"https:\/\/api.ecurring.com\/subscriptions?page[number]=1&page[size]=10","last":"https:\/\/api.ecurring.com\/subscriptions?page[number]=15&page[size]=10","prev":null,"next":"https:\/\/api.ecurring.com\/subscriptions?page[number]=2&page[size]=10"},"data":[{"type":"subscription","id":"937448302","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/937448302"},"attributes":{"mandate_code":"M54463137-7973360219-05702507345086","mandate_accepted":true,"mandate_accepted_date":"2019-09-20T12:35:12+02:00","start_date":"2019-09-20T00:00:00+02:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/242317\/M54463137-7973360219-05702507345086","confirmation_sent":true,"subscription_webhook_url":"http:\/\/wp.localhost\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/wp.localhost\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/wp.localhost\/?wc-api=ecurring_return&order_id=13&key=wc_order_3s5p3HBILqgVb","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-09-20T12:34:43+02:00","updated_at":"2019-09-20T12:36:00+02:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"2124600690"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/937448302\/transactions"},"data":[{"type":"transaction","id":"59364b6a-1e32-4326-8c9f-05d322e590e0"},{"type":"transaction","id":"32f693f5-0c0b-4076-9855-e8f46ada6757"},{"type":"transaction","id":"9bcf67f3-675f-44e4-af87-51a29b454369"},{"type":"transaction","id":"fa2f42a6-f363-4b08-9485-b4471a8a018d"},{"type":"transaction","id":"2825778b-2701-47d2-a396-dd5d6b2cffa0"},{"type":"transaction","id":"342a0e17-f4e4-421b-b542-265ad6d24064"},{"type":"transaction","id":"e69e7da3-8053-4939-8000-ad6058572026"},{"type":"transaction","id":"57e16556-3a56-45dd-91c2-11611274c87a"},{"type":"transaction","id":"f2bd0b39-b5db-4183-98d9-1477bd984a33"},{"type":"transaction","id":"a62da32f-c991-49d6-ba55-3edf8a19ca58"},{"type":"transaction","id":"6929010a-9cab-47ef-a3be-c6c3bd1c58d6"},{"type":"transaction","id":"ea3f9443-4f29-4b3d-9450-adb19032e372"},{"type":"transaction","id":"46a650bc-8552-426e-a926-80c44941fb6f"},{"type":"transaction","id":"7f7d1bbf-2044-4ed4-992c-212f901cc87e"},{"type":"transaction","id":"f4e70878-3855-41af-880f-b7d2936a639a"},{"type":"transaction","id":"dae80ee5-f047-4e65-b4f8-f193cea9bb07"},{"type":"transaction","id":"183c6a44-a85f-4e67-b1e0-82e05de7c139"},{"type":"transaction","id":"d78e2766-165a-4cc0-bd5b-5dffb7648310"},{"type":"transaction","id":"1dbe18b0-01d4-4a99-836e-a54d271c9065"},{"type":"transaction","id":"c8f9f641-5512-446c-a1d5-f3b7488cda61"},{"type":"transaction","id":"95519d1d-292a-419a-846a-a38ce754d639"},{"type":"transaction","id":"467bde71-9e8c-43e9-abcb-a1659f87a28d"},{"type":"transaction","id":"8a5ceaf1-78b4-4082-b315-9fb9089c6936"},{"type":"transaction","id":"791dcbfc-cedc-41ee-9135-3032f1d1b717"},{"type":"transaction","id":"3d429980-fc47-4606-b6a6-c434f23b2b06"},{"type":"transaction","id":"02a7d179-5d35-4b6c-b098-96cff79696ea"},{"type":"transaction","id":"84190479-7e9e-4a6a-b5ac-bf28ef22cb35"},{"type":"transaction","id":"70500ace-b2ee-48dc-bf73-92603ed06711"},{"type":"transaction","id":"070f742f-4f6d-4bdb-ba52-0e4e564f6f91"},{"type":"transaction","id":"fc39caf3-d440-468f-9afd-76cb969c447f"},{"type":"transaction","id":"ecea99fb-bdb0-4b4a-821e-06c8989a16fb"},{"type":"transaction","id":"96e6b083-a122-4e1d-9965-1de3d3e9cc23"},{"type":"transaction","id":"6764b40f-ef73-42a9-8bd5-d21c682c1e86"},{"type":"transaction","id":"a099c3d5-ca3a-4f35-a3eb-aaea2f3b47ca"},{"type":"transaction","id":"11cee300-7542-487e-a35c-4646aea60f91"},{"type":"transaction","id":"aa9be2c4-2a0d-4832-9ce5-89e0443114f0"},{"type":"transaction","id":"800a8883-edd7-4650-bd4c-046d05e59053"},{"type":"transaction","id":"9208b053-c8d0-4380-a324-242d9945ad84"},{"type":"transaction","id":"6479d503-e3d1-4d3e-b2fc-4b9c8e6f63bb"},{"type":"transaction","id":"5dbbf103-cc69-4cfb-85c8-962fc9c7c12e"},{"type":"transaction","id":"5fa9f2b7-e858-4766-9cef-c4e345cce449"},{"type":"transaction","id":"879e54bc-d3f7-4257-9ace-1cce1046bfcb"},{"type":"transaction","id":"0c51ea4f-d037-4e85-a795-af87f505892a"},{"type":"transaction","id":"1fbf4573-cc52-4ac9-a78e-8a2e1c3c1aa6"},{"type":"transaction","id":"0c7f318c-8c79-4ac7-9176-c51edc2c48b1"},{"type":"transaction","id":"cad8289b-3be6-4481-91e1-e857df0214e7"},{"type":"transaction","id":"33077bbc-552e-4f6a-9bc3-6175d650039b"},{"type":"transaction","id":"04c31c1c-767a-48f7-ae55-c1529e149a8a"},{"type":"transaction","id":"73f5e725-2f9c-4550-9055-7e13f01ebd14"},{"type":"transaction","id":"8141b7dc-40bf-42ee-9522-a7895f541abd"},{"type":"transaction","id":"3487365d-24ff-40c7-9a8d-507e41110fed"},{"type":"transaction","id":"2e1d1982-9393-4238-9344-f5c97fcfe6a8"},{"type":"transaction","id":"f9d6ffa0-5ca5-4688-b19c-b00c84cb2b03"},{"type":"transaction","id":"254b1c13-a164-4211-a310-768240898000"},{"type":"transaction","id":"b7f879fa-fb6a-4024-a633-2a1450d551cd"},{"type":"transaction","id":"06936224-2f74-415d-90fb-61207786f524"},{"type":"transaction","id":"96c1a8a6-e84b-43d5-b4b9-b7492e88f4ec"},{"type":"transaction","id":"cf85409d-f792-4869-9040-b4431a309c3c"},{"type":"transaction","id":"e97955c8-9bc2-4387-afd0-c71964828521"},{"type":"transaction","id":"c8eeea02-6928-44b6-9157-809721f9df0d"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/937448302\/invoices"},"data":[{"type":"invoice","id":"1800197884"},{"type":"invoice","id":"2007091479"},{"type":"invoice","id":"1287519211"},{"type":"invoice","id":"880311055"},{"type":"invoice","id":"971657401"},{"type":"invoice","id":"1509379878"},{"type":"invoice","id":"2086322018"},{"type":"invoice","id":"935334977"},{"type":"invoice","id":"1030764827"},{"type":"invoice","id":"748837863"},{"type":"invoice","id":"196927069"},{"type":"invoice","id":"1679013186"},{"type":"invoice","id":"399314916"}]}}},{"type":"subscription","id":"1315203678","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/1315203678"},"attributes":{"mandate_code":"M83163755-8853671740-22891290093058","mandate_accepted":true,"mandate_accepted_date":"2019-09-23T11:11:34+02:00","start_date":"2019-09-23T00:00:00+02:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/243293\/M83163755-8853671740-22891290093058","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurringtest.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurringtest.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurringtest.local\/wc-api\/ecurring_return\/?order_id=17&key=wc_order_WXuTyN3Zj2XpP","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-09-23T11:10:50+02:00","updated_at":"2019-09-23T11:12:01+02:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"804795593"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1315203678\/transactions"},"data":[{"type":"transaction","id":"3e495e4e-343a-4061-b4a2-fae62579abf1"},{"type":"transaction","id":"021edbb9-cd0e-447b-957c-56013c3c069b"},{"type":"transaction","id":"456bfa7b-bd36-4769-ad8c-9dbe1cb84e99"},{"type":"transaction","id":"0d8e6a18-6572-4359-86d2-3dcc5d6999de"},{"type":"transaction","id":"35c20f00-a349-49b5-b3b9-acf3b4e9d4a0"},{"type":"transaction","id":"00c03fca-fb2b-4238-a7f3-b41ced0e6b85"},{"type":"transaction","id":"afcbed04-5c78-4af3-b4e3-dd755fb16a09"},{"type":"transaction","id":"9900867d-1c4e-4fc9-91dd-d9e96738c007"},{"type":"transaction","id":"80fffc8e-580f-4b27-a2dd-354cf101f7a1"},{"type":"transaction","id":"6d8e3592-50c6-4067-b2c4-a2b4c440ea1e"},{"type":"transaction","id":"9c36f13b-9704-4fee-bbda-86ef16b4baef"},{"type":"transaction","id":"6fc8328c-273e-4e00-bcd5-c7952995477d"},{"type":"transaction","id":"5f9e6355-84c9-40ea-a255-9995d3a72fa5"},{"type":"transaction","id":"5ef0324c-a2df-4c04-b156-99bb4772c5c3"},{"type":"transaction","id":"0751efe6-e658-4644-9a2c-1d2950043915"},{"type":"transaction","id":"31c8c02d-36d8-47a7-b122-035bedf4fbfb"},{"type":"transaction","id":"71bbc205-791c-4c87-976a-89a4f9c2066d"},{"type":"transaction","id":"52eee063-a240-4c02-b88c-12d8359222cd"},{"type":"transaction","id":"19745e75-f27d-45d9-b48a-d3497018f214"},{"type":"transaction","id":"fedf9e03-47a0-4f1d-87ad-2ac99f708b4a"},{"type":"transaction","id":"c6b3208d-c332-4ce3-9669-32bd6d99e662"},{"type":"transaction","id":"58e57a14-1cc5-452a-bc93-061052998642"},{"type":"transaction","id":"7d7d0b3f-b75d-4b2b-83c1-f2a9554a9210"},{"type":"transaction","id":"f67e5059-b6b7-4ef8-a348-65040a4ba092"},{"type":"transaction","id":"45ecb1ae-2367-4abf-8938-90d35180f583"},{"type":"transaction","id":"1d251a4a-b1e8-4282-a429-86792ea72b09"},{"type":"transaction","id":"e8df7c27-bdce-422a-9275-b5f99b1b2a45"},{"type":"transaction","id":"3d8bcb15-797c-4064-98ac-805c8ecb6454"},{"type":"transaction","id":"79ff0567-3d94-403c-b451-5a158347aeab"},{"type":"transaction","id":"089886ab-784b-4c6c-903a-bd17bc9f4ff9"},{"type":"transaction","id":"36b0c4ad-c781-46fa-b8df-7f57756bc8a0"},{"type":"transaction","id":"abdd7565-7e61-436a-bb73-5b8118e6acd1"},{"type":"transaction","id":"7cafb13b-c410-4840-9ccb-dbb5217a9618"},{"type":"transaction","id":"1c3eb865-04cd-426e-9f34-710de3cfbfd5"},{"type":"transaction","id":"3ae6653e-ae2f-4113-adba-3950f34321df"},{"type":"transaction","id":"5c3b2c0c-3aca-4ec8-a093-5036fa7298de"},{"type":"transaction","id":"cd70bca3-00a2-4bd0-9f22-3548eb947aed"},{"type":"transaction","id":"4272e103-d3ca-422e-89fe-39aaa04fa660"},{"type":"transaction","id":"a21202c0-ce31-4841-b4fd-299648efec86"},{"type":"transaction","id":"98a37569-abc2-4811-b551-25cfb61c220f"},{"type":"transaction","id":"9338d546-cf53-4403-a80e-a22900f817c1"},{"type":"transaction","id":"2bdad505-e2a4-4897-b72a-dd620f12512a"},{"type":"transaction","id":"96934151-8136-4ee5-8619-2d9c52a73c21"},{"type":"transaction","id":"22400cff-f55e-4dd2-a484-7eda2c30edf6"},{"type":"transaction","id":"d5c97236-f791-41f0-a21b-89f63b3c919c"},{"type":"transaction","id":"e1dfb881-1c7b-4ad6-be86-1fdcd02916a2"},{"type":"transaction","id":"ad0815d8-59e9-4752-90f4-3984a4cd70bb"},{"type":"transaction","id":"76f0a12d-e402-4cc9-874f-25f0966b3162"},{"type":"transaction","id":"85e2e2cb-633e-466d-acfc-c8808945df1e"},{"type":"transaction","id":"6483fb66-dcd6-4fb7-8eea-47303312263a"},{"type":"transaction","id":"774f1231-1dc6-4cb3-9791-c18656dddeec"},{"type":"transaction","id":"76d8751b-21e5-4edd-90b6-c3ebf8c2a5df"},{"type":"transaction","id":"e05a98d5-772b-424f-99d6-ded36e2fc99e"},{"type":"transaction","id":"676382c5-2014-4bf4-bb19-ea205ea3160c"},{"type":"transaction","id":"ea758780-b2c4-4489-ba7b-103ceaa1af6f"},{"type":"transaction","id":"eccc0fec-032a-41bc-98c2-a0b559aafd9a"},{"type":"transaction","id":"76050c4a-bf8b-4457-a908-f3b36f7eca6c"},{"type":"transaction","id":"ed115c78-e719-4a92-a478-ec9188f09bfc"},{"type":"transaction","id":"9a3c0fd4-3b93-48a6-842d-7a87776308dd"},{"type":"transaction","id":"119a3d8e-2d59-4464-b611-98728f1f808f"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1315203678\/invoices"},"data":[{"type":"invoice","id":"2138615204"},{"type":"invoice","id":"1134679825"},{"type":"invoice","id":"1925070423"},{"type":"invoice","id":"1280341780"},{"type":"invoice","id":"279903853"},{"type":"invoice","id":"643395050"},{"type":"invoice","id":"1862824915"},{"type":"invoice","id":"425422911"},{"type":"invoice","id":"1033986302"},{"type":"invoice","id":"1723849555"},{"type":"invoice","id":"2025435587"},{"type":"invoice","id":"574823441"},{"type":"invoice","id":"728824199"}]}}},{"type":"subscription","id":"799178993","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/799178993"},"attributes":{"mandate_code":"M57654474-8465040165-97524142302031","mandate_accepted":true,"mandate_accepted_date":"2019-09-23T11:30:45+02:00","start_date":"2019-09-23T00:00:00+02:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/243300\/M57654474-8465040165-97524142302031","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurringdev.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurringdev.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurringdev.local\/wc-api\/ecurring_return\/?order_id=13&key=wc_order_jsXA0BfSPe7dC","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-09-23T11:30:26+02:00","updated_at":"2019-09-23T11:33:01+02:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"1710318449"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/799178993\/transactions"},"data":[{"type":"transaction","id":"aef58ee0-156b-4e9f-8d10-35d197c662d8"},{"type":"transaction","id":"eab5ec1a-9eda-4cf1-8465-65263cd19a20"},{"type":"transaction","id":"5c02f1bb-01b1-4820-8ad8-7870f352e88f"},{"type":"transaction","id":"34bdc555-451f-4440-9890-00eeeddd7c8f"},{"type":"transaction","id":"e30e3023-af76-48b2-85ed-86a7079c0b10"},{"type":"transaction","id":"0eac17e2-1f48-48ac-aa2b-fd429a8cc9e3"},{"type":"transaction","id":"6a90a696-5101-4466-a822-b51a1bfff20e"},{"type":"transaction","id":"c42950fd-9a7d-43fb-82a6-35b9bbddf896"},{"type":"transaction","id":"a6ce1603-3497-4a2d-be73-a8580d3d287f"},{"type":"transaction","id":"f3113fbe-9020-4fc3-86f5-80a415432620"},{"type":"transaction","id":"ff078935-cbd1-42b6-81c5-6b5fc1a44c2e"},{"type":"transaction","id":"e723fe78-0478-4ce6-9284-3d0d7c736c6e"},{"type":"transaction","id":"762a23b7-9af5-4816-ab93-650221d55339"},{"type":"transaction","id":"fc134210-a3bc-4c66-b507-7ccee13ced94"},{"type":"transaction","id":"38e9034f-16a8-4024-b005-eddcedf85c20"},{"type":"transaction","id":"3d548b38-5444-4150-a7d1-4782083305f4"},{"type":"transaction","id":"5f220c83-68b1-41bb-9a26-74f4de8543f1"},{"type":"transaction","id":"6db2becf-6c12-4fef-b9d6-b14c29881401"},{"type":"transaction","id":"c35bdc80-74b9-47dd-98fa-873c30dae3cd"},{"type":"transaction","id":"2a0d4f85-3b12-4bf7-8723-0b9b5c7b68aa"},{"type":"transaction","id":"1f4d02e1-5564-422a-9d4a-674fea47afb6"},{"type":"transaction","id":"c1c846e7-e3f9-4299-9963-cefbaccf08c1"},{"type":"transaction","id":"0d7e91b7-f5c6-4f6f-bba5-d894c5b301f2"},{"type":"transaction","id":"5f397e72-697e-4912-8605-fcff99ab5da3"},{"type":"transaction","id":"4e391ba3-a100-4439-acfe-f8f1452a0022"},{"type":"transaction","id":"845bffc8-948d-43f6-981e-4cb7971c5b66"},{"type":"transaction","id":"17b8a446-86be-4a80-8683-0cb91a856b7c"},{"type":"transaction","id":"25201078-2a4b-489e-ac79-b8c9ae1bd44d"},{"type":"transaction","id":"abc0f46a-8421-4ea2-b745-5e8b48f517b5"},{"type":"transaction","id":"7ada0250-7713-433e-a22c-c138583677be"},{"type":"transaction","id":"4427f1b7-9219-40fc-ae5d-7c7e3c492686"},{"type":"transaction","id":"312e5dbd-ea9a-48d7-a408-4a3e4e5df1e6"},{"type":"transaction","id":"c4a9033d-79e4-4c4d-9d87-b8790f390f6b"},{"type":"transaction","id":"58a14202-138f-4268-bd93-8e7bff4e9229"},{"type":"transaction","id":"97b0233b-ac85-4e59-8782-6a52657f2615"},{"type":"transaction","id":"71de4b44-13fa-4448-b4cd-64a2138c7e0b"},{"type":"transaction","id":"e1576a66-7be9-4269-bd77-5f2974cdd922"},{"type":"transaction","id":"a5461cbb-46dc-4eda-8022-5f5b59133b17"},{"type":"transaction","id":"643185e4-0f72-43ce-848a-41c0f45b9d3a"},{"type":"transaction","id":"f43956b1-8cb2-4da4-9613-89de6cbef70e"},{"type":"transaction","id":"d5abadfc-8e9b-483d-9c9c-3f634df2b027"},{"type":"transaction","id":"68a9099e-4b34-44bc-9f2c-eed04dc75765"},{"type":"transaction","id":"347e53b1-bcd8-4fa8-8bfe-a4762150224c"},{"type":"transaction","id":"84317d21-d9b3-4c4e-814d-2130dd805f2a"},{"type":"transaction","id":"61df0fe5-51fc-442c-97d5-b9d39134a719"},{"type":"transaction","id":"41c5fb68-b450-45b8-882c-cf0ced431267"},{"type":"transaction","id":"8f6ad01f-1051-4de3-896d-8ff3e44c68d4"},{"type":"transaction","id":"627b2b13-9730-445c-b232-a1fba4daa0d5"},{"type":"transaction","id":"41f0ca3a-93d8-4296-831b-930e868ed187"},{"type":"transaction","id":"7b81896f-bbd8-454e-8ecc-6873d54c75a4"},{"type":"transaction","id":"21716e24-cbc2-4838-9436-347ffe05319f"},{"type":"transaction","id":"c98367af-dd5f-4271-916f-a86123d4d93e"},{"type":"transaction","id":"c19455eb-889e-495e-a589-1061ad2c0f5c"},{"type":"transaction","id":"008fcaa3-aaae-41a4-a991-72252ec3d2cc"},{"type":"transaction","id":"03f9f7ca-75e6-460e-b4a4-b6392a6a496b"},{"type":"transaction","id":"23bac93e-e66f-4dba-8477-23d9e4586ad4"},{"type":"transaction","id":"23b8361c-5b51-49ad-81d7-a99957b17d77"},{"type":"transaction","id":"3111fa4f-9547-4042-821d-75e6bfd3b006"},{"type":"transaction","id":"20de5da4-0ebd-4fb9-9f38-b9ed9e2fe57c"},{"type":"transaction","id":"c12da63f-1529-4b0c-bad0-fa3a2e11e7ce"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/799178993\/invoices"},"data":[{"type":"invoice","id":"1555481567"},{"type":"invoice","id":"1517061907"},{"type":"invoice","id":"1565917987"},{"type":"invoice","id":"1076793828"},{"type":"invoice","id":"2054851636"},{"type":"invoice","id":"1891796900"},{"type":"invoice","id":"258089803"},{"type":"invoice","id":"1937840057"},{"type":"invoice","id":"324188165"},{"type":"invoice","id":"1271288741"},{"type":"invoice","id":"2136560740"},{"type":"invoice","id":"557459321"},{"type":"invoice","id":"1603309052"}]}}},{"type":"subscription","id":"681784580","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/681784580"},"attributes":{"mandate_code":"M66719074-9384350713-20258112072348","mandate_accepted":true,"mandate_accepted_date":"2019-10-25T17:04:10+02:00","start_date":"2019-10-25T00:00:00+02:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/257095\/M66719074-9384350713-20258112072348","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurring.local\/wc-api\/ecurring_return\/?order_id=16&key=wc_order_UJpkdyB2mU5ep","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-10-25T17:03:29+02:00","updated_at":"2019-10-25T17:06:01+02:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"583989843"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/681784580\/transactions"},"data":[{"type":"transaction","id":"93d0e4b2-3069-43db-8cc2-401935cba1a4"},{"type":"transaction","id":"990a533f-b564-4009-9ec5-c2cde84d60bd"},{"type":"transaction","id":"ff81df6b-1081-43e8-9ebd-73235f37826c"},{"type":"transaction","id":"56b89bcf-e3dc-4f12-a0fc-427fc20c3918"},{"type":"transaction","id":"7a7f33ff-1288-416e-9a1f-5c7a17e0a86c"},{"type":"transaction","id":"91142f2f-cc16-46e6-b4f6-681c757b14f8"},{"type":"transaction","id":"803eb905-b5ff-479a-a2a8-003e5a2c96c6"},{"type":"transaction","id":"c3d2d077-cb0d-4b18-bd26-111de34de2cb"},{"type":"transaction","id":"afbcd34d-4693-4ee8-8b99-200e496b145a"},{"type":"transaction","id":"8190892c-785e-4fa1-a823-a13d9936490b"},{"type":"transaction","id":"beb30abe-e6ff-46d3-a4af-b18403759761"},{"type":"transaction","id":"dfd43a6f-3305-4922-8c99-e56d8fd34d44"},{"type":"transaction","id":"8d59e6ad-5c68-4f91-aec5-68f0c9ef053c"},{"type":"transaction","id":"167d6260-e413-4e45-90fc-2352cb2aa19c"},{"type":"transaction","id":"e2b7ee1c-21e4-46d0-bbad-2aaebdd439fd"},{"type":"transaction","id":"91de175a-84a6-4c2d-b2ed-196f918ef0ca"},{"type":"transaction","id":"4c8fcdaa-375c-444d-850f-f0cd8bc6dc65"},{"type":"transaction","id":"2527a2f6-fc37-459c-8122-4c9e893f0fd7"},{"type":"transaction","id":"a0d5bde7-2c2a-41ad-bf53-cd7b07e6575a"},{"type":"transaction","id":"af021a05-5317-4c2e-b60f-0b8aa8bcd107"},{"type":"transaction","id":"5173d825-ca5f-4ef5-86d6-e46165f3af43"},{"type":"transaction","id":"8b03d000-3fd7-4d0a-aee3-e1fba2dda7aa"},{"type":"transaction","id":"78142b7b-f67f-473f-abab-9f63f7743dc9"},{"type":"transaction","id":"f97cc373-d411-4d94-8932-ee741ed84bc9"},{"type":"transaction","id":"710a2fc2-7346-43a3-9857-5df7bd310096"},{"type":"transaction","id":"98696169-b9e1-4470-a90c-f711602332a9"},{"type":"transaction","id":"b29ff8bb-66fd-49a2-9f6a-23fd4aa43756"},{"type":"transaction","id":"b8028fa5-4a71-4fc5-8666-e3dbe65ae76b"},{"type":"transaction","id":"282f903a-4a89-48a3-8de7-6e6d0743ee07"},{"type":"transaction","id":"ef4fcb5d-e4aa-42e6-b672-08e88adcf5df"},{"type":"transaction","id":"da0be0d2-ef8e-456d-a525-9ff16639c2a0"},{"type":"transaction","id":"6d8ddda3-353b-4e60-9ffd-d8aca447ea93"},{"type":"transaction","id":"dabc316c-5e0e-4e19-9928-48fc0d39540a"},{"type":"transaction","id":"7875d63a-155c-4037-80ed-4983d4aa0f45"},{"type":"transaction","id":"9db08896-8984-44b7-8f2c-29061c7d5784"},{"type":"transaction","id":"eff59831-f2c0-4f00-b702-88a37b4d4e67"},{"type":"transaction","id":"b2985e40-78d8-4066-a71b-cfd20ab76e51"},{"type":"transaction","id":"10fa4760-3545-4f2e-ae24-4d0c9b539939"},{"type":"transaction","id":"462a0133-d7cc-4bff-aa81-5bbcf6026f9b"},{"type":"transaction","id":"ef65f7a1-f3a8-43dc-a5aa-116fde582f1b"},{"type":"transaction","id":"fc8c4bf8-fee5-4f09-a956-828030528b83"},{"type":"transaction","id":"aa18f534-a3e1-43d7-bf47-ca4767288c9c"},{"type":"transaction","id":"b32d5343-c8bb-472a-b680-3d096f426715"},{"type":"transaction","id":"893e184c-1e07-48bd-b683-c98f4ae7a6d2"},{"type":"transaction","id":"2125ee97-370f-4a4a-918f-4bb23cda6d0a"},{"type":"transaction","id":"2cd18742-0108-4e10-abed-ce827081f576"},{"type":"transaction","id":"2c5bba47-ed6a-4818-8c19-0a1850c2d8a0"},{"type":"transaction","id":"e5bba714-c153-4a35-978f-c83dc3f59e4c"},{"type":"transaction","id":"a2bf4d82-2a7e-4f43-9a21-ef8a45735bc5"},{"type":"transaction","id":"8d57d3d0-174f-4730-925c-30a3d330ebf0"},{"type":"transaction","id":"014995d5-3816-4822-882b-217e35888e16"},{"type":"transaction","id":"59415b37-d1c4-4ec6-8afd-4878d36b1f95"},{"type":"transaction","id":"de8f1b2d-0246-4a7b-9e17-f95bdc576292"},{"type":"transaction","id":"0532ae3f-0ceb-4e46-97dd-b3f8d7316767"},{"type":"transaction","id":"f03a7052-4af2-4ce0-8467-3b9d5ffb61db"},{"type":"transaction","id":"c009535e-0cc9-4f1b-8d26-ec0e75970c80"},{"type":"transaction","id":"a764a68f-0817-4974-a1e6-0ffa230d66bc"},{"type":"transaction","id":"a2dc2686-f89e-4fba-b8f9-c0aaf87aa7c0"},{"type":"transaction","id":"12b6cb64-4f89-4bcc-b5cd-058066fb557a"},{"type":"transaction","id":"299edac7-6236-4dff-b314-4ca71c6aa642"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/681784580\/invoices"},"data":[{"type":"invoice","id":"1471395410"},{"type":"invoice","id":"1105174775"},{"type":"invoice","id":"1979379449"},{"type":"invoice","id":"144860867"},{"type":"invoice","id":"1192917367"},{"type":"invoice","id":"765141454"},{"type":"invoice","id":"1169172757"},{"type":"invoice","id":"98511181"},{"type":"invoice","id":"809687566"},{"type":"invoice","id":"334976213"},{"type":"invoice","id":"1954838505"},{"type":"invoice","id":"665546781"}]}}},{"type":"subscription","id":"2119722380","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/2119722380"},"attributes":{"mandate_code":"M20265687-8947868982-84410540513191","mandate_accepted":false,"mandate_accepted_date":null,"start_date":"2019-10-25T00:00:00+02:00","status":"unverified","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/257103\/M20265687-8947868982-84410540513191","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurring.local\/wc-api\/ecurring_return\/?order_id=17&key=wc_order_Iq7eV8FCueBHC","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-10-25T17:25:55+02:00","updated_at":"2019-10-25T17:30:04+02:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"34017482"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/2119722380\/transactions"},"data":[]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/2119722380\/invoices"},"data":[]}}},{"type":"subscription","id":"232393106","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/232393106"},"attributes":{"mandate_code":"M06369968-8881876828-28613231933816","mandate_accepted":true,"mandate_accepted_date":"2019-10-25T17:26:43+02:00","start_date":"2019-10-25T00:00:00+02:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/257105\/M06369968-8881876828-28613231933816","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurring.local\/wc-api\/ecurring_return\/?order_id=17&key=wc_order_Iq7eV8FCueBHC","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-10-25T17:26:29+02:00","updated_at":"2019-10-25T17:27:01+02:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"1367786280"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/232393106\/transactions"},"data":[{"type":"transaction","id":"75d662b5-9e2f-4ed3-9c38-3ed55b857dfa"},{"type":"transaction","id":"5b7d150f-1989-400d-ae66-e27a4bcbc040"},{"type":"transaction","id":"b4045aa3-2ace-49cc-bfb2-7e1b8f36610f"},{"type":"transaction","id":"2ca14f05-6e43-4333-ae4a-f4097c66a3a5"},{"type":"transaction","id":"03c9e2b3-9875-4775-968e-ac5d58066585"},{"type":"transaction","id":"5e8ebe75-372c-44e9-a1b6-a59f8d845cc1"},{"type":"transaction","id":"77a66f00-de07-435f-ae1a-550a131b4ae7"},{"type":"transaction","id":"27053886-46e7-43b3-923c-7fc57575a5bc"},{"type":"transaction","id":"ae2287be-e526-40c4-b3f4-2c3c2b259e88"},{"type":"transaction","id":"15d98221-1153-41da-8ee7-9bf57f12428b"},{"type":"transaction","id":"13b68500-738c-4e49-8b6a-4b394ccf9829"},{"type":"transaction","id":"1c0f33e4-8002-49ee-9925-3108c1fc3337"},{"type":"transaction","id":"4336f260-caf2-46b6-8e56-dfab91dee285"},{"type":"transaction","id":"ce6c9125-1d84-42aa-aec0-395b75289190"},{"type":"transaction","id":"69244a64-2f04-477e-b17d-6eaa083fa583"},{"type":"transaction","id":"ccdbf50f-e3b4-42ed-a41d-e5428b09e102"},{"type":"transaction","id":"8c7a79ef-b5b2-4da4-b3d3-3f268d7d6fef"},{"type":"transaction","id":"16b54852-09b0-4ff7-8bff-f16d5bbcb8c3"},{"type":"transaction","id":"a846f178-42b6-445c-a6b7-f94c9b4b84ca"},{"type":"transaction","id":"98126508-316f-4048-bd77-29bae95bcacf"},{"type":"transaction","id":"bc0c5aed-30ab-4a2a-8253-7804021b175c"},{"type":"transaction","id":"5ab5fc86-8a2c-408b-b278-ac299c412887"},{"type":"transaction","id":"8625ac7e-1e32-4f60-a1fc-229b1f67f039"},{"type":"transaction","id":"d1d8961a-387d-4d2b-9ec5-1812058b27d0"},{"type":"transaction","id":"5929da72-5295-4eed-aacd-4abb76a0c7de"},{"type":"transaction","id":"af21ec28-0992-45ac-97ad-5f88a3680e48"},{"type":"transaction","id":"3412437b-dc79-4ca7-8ce0-7e3463486359"},{"type":"transaction","id":"826f74d1-2ef7-4d74-b1e9-4515a4f5d38b"},{"type":"transaction","id":"e031c84b-510e-470c-a7eb-443683c449d7"},{"type":"transaction","id":"9c5f3eca-8c24-40d8-9ffe-e1b3b808af2a"},{"type":"transaction","id":"c2f213f8-1cb7-4ae6-8de0-91ee93928f4d"},{"type":"transaction","id":"f3b276ce-1a44-441d-9b9f-6a9d6411c725"},{"type":"transaction","id":"5fcae440-ddf1-4e97-a96b-610a116a1c96"},{"type":"transaction","id":"53f9c12c-bf75-4a54-8f71-059fd82f7208"},{"type":"transaction","id":"5c39f1d4-5f2f-4e11-af2d-86bce366bab4"},{"type":"transaction","id":"7f9e6b07-8ec1-45fb-a6f0-28d38c74d9d7"},{"type":"transaction","id":"df44974e-cc47-4f21-9fa1-5f5d11081561"},{"type":"transaction","id":"539b2cbe-c69b-4743-9fb1-7272250e0d81"},{"type":"transaction","id":"e4a198eb-b66e-4f47-a4f3-8725ac5b7767"},{"type":"transaction","id":"2abf8b53-93be-449f-83d3-7f8792bf2ea6"},{"type":"transaction","id":"e0308836-44de-4939-a8c7-6f77ded1e777"},{"type":"transaction","id":"227b1469-323f-4e33-8a43-ae4eada749a6"},{"type":"transaction","id":"ea832537-e472-4de5-835b-e605f820eb91"},{"type":"transaction","id":"fbef655b-3ea3-4cd3-99b5-13ec2fcfe329"},{"type":"transaction","id":"0a83ea80-7b62-4538-95eb-96c4c719a520"},{"type":"transaction","id":"28c2506b-d0a9-40f6-b5b9-4caa335cb186"},{"type":"transaction","id":"cbbcdb06-82a9-4c35-887b-570b1bc9cfab"},{"type":"transaction","id":"2e29fcdc-7c06-4ec6-b31d-cd2f32bddb32"},{"type":"transaction","id":"8a8c352a-54f0-438b-95f7-0b86762e43ff"},{"type":"transaction","id":"2eccacbe-5f72-40f8-b40e-28b648c81bc1"},{"type":"transaction","id":"c11f547c-bc2b-4b15-a3c6-0dba53cbdeb8"},{"type":"transaction","id":"b7c9e2f1-d3a7-4eb3-8248-cc822297754f"},{"type":"transaction","id":"8373d53d-60f5-4d33-ad3b-676b81279961"},{"type":"transaction","id":"a2fe8db7-e4f1-4116-86c2-1cac487f3dcc"},{"type":"transaction","id":"5f0178a3-8728-4374-a814-75ed569d11f3"},{"type":"transaction","id":"b81d0166-653b-4809-b6b9-a258f9a594b2"},{"type":"transaction","id":"17e07667-a0ce-4842-85a3-77b09d7e3a34"},{"type":"transaction","id":"7aa0078a-dcc7-4cb8-998f-6f7bb97c6cb4"},{"type":"transaction","id":"1d9b0e9e-a3c3-4f02-a71d-1feb708fb429"},{"type":"transaction","id":"d7f81276-eb0c-47b3-af79-e642505aec10"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/232393106\/invoices"},"data":[{"type":"invoice","id":"2058870382"},{"type":"invoice","id":"1524205017"},{"type":"invoice","id":"1657169107"},{"type":"invoice","id":"1167782132"},{"type":"invoice","id":"1229565535"},{"type":"invoice","id":"710342058"},{"type":"invoice","id":"1074081256"},{"type":"invoice","id":"1737922370"},{"type":"invoice","id":"1942892412"},{"type":"invoice","id":"14860986"},{"type":"invoice","id":"822376666"},{"type":"invoice","id":"342167250"}]}}},{"type":"subscription","id":"1961742680","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/1961742680"},"attributes":{"mandate_code":"M77317224-3881153775-33276449000516","mandate_accepted":true,"mandate_accepted_date":"2019-10-28T16:31:52+01:00","start_date":"2019-10-28T00:00:00+01:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/257851\/M77317224-3881153775-33276449000516","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurring.local\/wc-api\/ecurring_return\/?order_id=18&key=wc_order_F1rhyrhMYaoYF","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-10-28T16:31:40+01:00","updated_at":"2019-10-28T16:33:01+01:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"581940043"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1961742680\/transactions"},"data":[{"type":"transaction","id":"f646db0a-aa2c-4db6-956b-6fd524a335a9"},{"type":"transaction","id":"686fa115-5b5c-48d5-8376-821882d6bc12"},{"type":"transaction","id":"8c3f19a7-0182-4187-82d5-92604d3080f6"},{"type":"transaction","id":"aea137e9-21d5-42f7-b4c9-9a2eee525219"},{"type":"transaction","id":"1edf96c8-a43b-4b72-a543-358531ef6a81"},{"type":"transaction","id":"b7aacf8b-7978-4815-b2f4-3420e6d72b78"},{"type":"transaction","id":"2ce922dc-5dd4-496c-ba02-78d95331dd34"},{"type":"transaction","id":"bf273724-0945-4bc0-bfb8-a1b3895f619b"},{"type":"transaction","id":"0e1d859e-50b4-481a-bf28-49e812cb3bb0"},{"type":"transaction","id":"3e99e5b3-c530-4f3e-8d07-1570c3c94a22"},{"type":"transaction","id":"85d4fbdf-db01-4325-83a9-8dccc1d9b2f6"},{"type":"transaction","id":"f51b9c4c-fe2c-4db3-8c40-37fd1ef02ffe"},{"type":"transaction","id":"775221a3-7217-440b-a61d-0453ad467657"},{"type":"transaction","id":"26195f7d-dd70-436a-8c16-c20cc563d994"},{"type":"transaction","id":"ccf146ed-2d53-4819-a5d0-a4ecadf7be42"},{"type":"transaction","id":"11fee0fd-6dd5-4b46-a9f9-f158e1dedeb8"},{"type":"transaction","id":"8fb405f2-b5cc-4674-b7c9-2e9daf114e3a"},{"type":"transaction","id":"784b86a6-87e2-4228-96f7-931e0cfb9486"},{"type":"transaction","id":"8fbbada0-ea89-409b-b931-862e2ca6c29f"},{"type":"transaction","id":"8d3f4735-cbe6-455e-9719-d876a3a2ff7c"},{"type":"transaction","id":"619d8522-6e8e-4113-b339-fa1f4f629acb"},{"type":"transaction","id":"d3ca2055-7fd1-4aea-bde9-e67e48994790"},{"type":"transaction","id":"55fb9e41-ec47-43a2-a389-355057ffecf2"},{"type":"transaction","id":"70f2f1ff-4a38-4e29-b0e1-123e141470ef"},{"type":"transaction","id":"3cab8c76-e16e-4905-82b0-fe35ea1468ed"},{"type":"transaction","id":"7bd61eff-787c-421d-8da1-353bd31cf407"},{"type":"transaction","id":"7e7fe779-26c9-4685-8373-48476cdd37a7"},{"type":"transaction","id":"d5e2c1ff-8376-4d38-b030-156c279c4d03"},{"type":"transaction","id":"4f5bf5ea-d5e2-46c5-ab64-5fdfc658786a"},{"type":"transaction","id":"58a9be10-6188-46b9-a6d0-533458c5ca85"},{"type":"transaction","id":"ee8acd6f-f546-4d39-af9e-5ae0d773b20c"},{"type":"transaction","id":"28b0cef3-5523-4d02-ba59-741b0aa88711"},{"type":"transaction","id":"16aa2295-68c9-4cbe-92fe-ea2622ab41bd"},{"type":"transaction","id":"a806e74f-a184-4554-9d17-d98f1d2704c4"},{"type":"transaction","id":"858be4cd-4dee-495d-aed3-ebcf71db34af"},{"type":"transaction","id":"2c1432e2-5613-4ec1-8fbc-3dd0566bbe35"},{"type":"transaction","id":"eeaf5b9f-c3d5-40db-8643-84475a3989a7"},{"type":"transaction","id":"5498c6cc-a5ab-4654-b289-341fef4ef560"},{"type":"transaction","id":"9c28f574-33cd-4d99-9d76-393fcc842c9b"},{"type":"transaction","id":"d67a8f4e-5f52-4c44-9159-168055bcc097"},{"type":"transaction","id":"d349f153-335a-4c3a-ab2d-0caf86459c54"},{"type":"transaction","id":"0326848f-44ac-4402-b2a6-78e77b85ad9b"},{"type":"transaction","id":"3a07813d-7114-4973-8c51-79da727d3c13"},{"type":"transaction","id":"a8512edc-8bf5-4eab-9a58-8ef1c3b8aaea"},{"type":"transaction","id":"36fc7c46-ad88-4260-8f25-089daae378f5"},{"type":"transaction","id":"14d3dbe6-f0e7-48b5-aa53-180377ec8191"},{"type":"transaction","id":"46e5a38c-42a1-4ed0-a3ed-1a27563adcae"},{"type":"transaction","id":"10ed7b1e-474b-4232-8844-ebe890dc0b63"},{"type":"transaction","id":"3bfcbe55-1a77-4ff1-9817-c06ba98ad6dc"},{"type":"transaction","id":"135c166c-931e-4a3f-a6fa-0d291f944133"},{"type":"transaction","id":"42c14dc0-a37c-43a4-a2ca-dfe40335ba5b"},{"type":"transaction","id":"cb2530c3-ad1d-44ab-86a5-4a30643c6fa3"},{"type":"transaction","id":"3d42f209-06a4-48ee-9839-8d7f31c6ee9c"},{"type":"transaction","id":"0b2ca4d4-56a1-423e-9ba3-70516f041581"},{"type":"transaction","id":"af20644d-7ab8-43b3-a804-7b43a63ff173"},{"type":"transaction","id":"0ba5b9ca-fc45-402a-9d1a-6f26c8f66ccc"},{"type":"transaction","id":"2bbef73e-aca3-43d3-a0e5-c68cd4c0360a"},{"type":"transaction","id":"c743cc6b-b3a6-4536-8809-75ebd6793343"},{"type":"transaction","id":"0537c63e-4551-41e6-93e4-15f94b51e2de"},{"type":"transaction","id":"94309be6-de2d-4ed2-9a2b-20d9a938f176"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1961742680\/invoices"},"data":[{"type":"invoice","id":"2019913988"},{"type":"invoice","id":"358324097"},{"type":"invoice","id":"2028877204"},{"type":"invoice","id":"1604622111"},{"type":"invoice","id":"1855285956"},{"type":"invoice","id":"552960064"},{"type":"invoice","id":"329716260"},{"type":"invoice","id":"1788045763"},{"type":"invoice","id":"1529744085"},{"type":"invoice","id":"1050393775"},{"type":"invoice","id":"1824832572"}]}}},{"type":"subscription","id":"2137742818","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/2137742818"},"attributes":{"mandate_code":"M97246515-5028740003-97065376290360","mandate_accepted":true,"mandate_accepted_date":"2019-10-28T16:42:10+01:00","start_date":"2019-10-28T00:00:00+01:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/257857\/M97246515-5028740003-97065376290360","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurring.local\/wc-api\/ecurring_return\/?order_id=19&key=wc_order_K3qDT11ZmOCFm","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-10-28T16:41:47+01:00","updated_at":"2019-10-28T16:45:03+01:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"1953113500"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/2137742818\/transactions"},"data":[{"type":"transaction","id":"579bfff6-564f-41d0-b790-0352dea21efd"},{"type":"transaction","id":"00192a4d-ea90-44f7-8259-88db41849fe7"},{"type":"transaction","id":"9987a680-6815-453c-8f58-ce78c0ca6d16"},{"type":"transaction","id":"0570a2c4-729d-4233-9bfb-b638a4075b6c"},{"type":"transaction","id":"94e296e1-39c5-43a8-8f8e-ac5b5471d62f"},{"type":"transaction","id":"86d38c58-29c0-4d8a-832b-258c264c231d"},{"type":"transaction","id":"f33325ff-4461-4674-ad03-8c2da2e961eb"},{"type":"transaction","id":"73573500-de06-495b-8f38-303990e24ac0"},{"type":"transaction","id":"8c9f3e97-a288-4b75-b35e-556b06257914"},{"type":"transaction","id":"2563cf27-b702-4733-bf16-64f982d313e3"},{"type":"transaction","id":"5adc24f9-2815-484a-b168-c9946a87e56e"},{"type":"transaction","id":"bb701d4d-5b48-4bc0-a89e-4220648599cd"},{"type":"transaction","id":"2f28daaa-3cda-44b8-8c77-e6ad8cb3da7f"},{"type":"transaction","id":"a3bc73d1-ec3f-4a78-8fe2-56c5bd4da3a0"},{"type":"transaction","id":"41419b8b-19a0-4c6e-9e2d-0ca30b6df9cf"},{"type":"transaction","id":"700760dc-7095-4e5b-bced-c795ee63c334"},{"type":"transaction","id":"1b9e0c02-a498-4386-aef6-7fa26dfc51a7"},{"type":"transaction","id":"5ccc5038-a485-4f65-9c77-8eb409f76e93"},{"type":"transaction","id":"81210be9-f0bd-44fc-99a1-f60a136ce07e"},{"type":"transaction","id":"e3819ccd-179e-40b9-90ae-3f1a8f027df9"},{"type":"transaction","id":"142d784b-29c1-4dca-a3d0-5403eb20e084"},{"type":"transaction","id":"a4e1a87e-e563-4227-a264-554261c96d17"},{"type":"transaction","id":"1c9bfba4-f2c5-47d3-bed1-245214f979e0"},{"type":"transaction","id":"ffe03bfb-a673-4af2-8f90-46e86bb9680a"},{"type":"transaction","id":"8d1868c1-b377-412c-8d56-2efbcb908972"},{"type":"transaction","id":"7061e84d-827b-410d-a35a-a8879b6d423b"},{"type":"transaction","id":"a5aa32c4-432b-4e26-94bb-98bf86c8ae8e"},{"type":"transaction","id":"7e3ae260-4191-4c07-bfc8-96620a7f1c1f"},{"type":"transaction","id":"8ed95dbc-5b82-47c1-86b9-c388bc5e5447"},{"type":"transaction","id":"3fd3656c-3fbf-4e50-a9d5-35d2a4948b7e"},{"type":"transaction","id":"bf439710-fd92-4734-9af8-4de0034ba64a"},{"type":"transaction","id":"13c9a982-eedf-4a95-aee6-e5b66c0e9f41"},{"type":"transaction","id":"3ef7f5a0-490b-4686-b82f-bb9d362039fe"},{"type":"transaction","id":"8ae2ead0-aa71-446e-af9d-aafc342f4b97"},{"type":"transaction","id":"4b49cd5c-8bdc-47a1-ae7c-296b8095d9a1"},{"type":"transaction","id":"b743c2a8-7d74-4011-ad6e-b0648aebbc87"},{"type":"transaction","id":"4f3ef2a9-b43b-41eb-a12f-c5f39580e30a"},{"type":"transaction","id":"c5945e6a-581e-4cfa-b3b9-f43eab3ee842"},{"type":"transaction","id":"30df7dd9-ff21-4479-bff5-04d2aceea4e1"},{"type":"transaction","id":"5a96c50f-254a-45ae-85de-50652719b5c9"},{"type":"transaction","id":"10e6d64e-5c4a-458a-9d5e-a57762f1820a"},{"type":"transaction","id":"7a0265ef-fa5e-42d9-b784-d2eadbbc235b"},{"type":"transaction","id":"8716f271-1347-44a8-a54c-48029f5199be"},{"type":"transaction","id":"653518cb-e8a7-4b55-a842-2fbcc25b9625"},{"type":"transaction","id":"aa821e3f-d612-4fe7-8bc7-5e5a4833b3c7"},{"type":"transaction","id":"d2881e81-1ccf-4882-861f-3972167c6ab9"},{"type":"transaction","id":"a78b75de-493a-475d-9991-53c610a31074"},{"type":"transaction","id":"3f57ee4f-5c26-4db5-a489-c00660598704"},{"type":"transaction","id":"de772f0b-f932-447d-aff7-22087eaa3026"},{"type":"transaction","id":"4d4e28a4-569d-460c-8ba3-21e8f0bcaa6e"},{"type":"transaction","id":"1d9775c7-9fbc-44a6-9b50-653cfdc415a1"},{"type":"transaction","id":"2126565a-28b6-4a63-baa4-01a26435c61d"},{"type":"transaction","id":"02a1598c-b4cb-4fe5-aaed-177160b86446"},{"type":"transaction","id":"11e8d652-516e-437f-ab60-571f62101948"},{"type":"transaction","id":"2e0f2765-bf7d-4816-9441-1bf33e80a3a1"},{"type":"transaction","id":"746fa013-b0bc-46a8-a9ba-57da490f8d1b"},{"type":"transaction","id":"c058d691-7972-4305-bae0-b71745ad458d"},{"type":"transaction","id":"e9b87fb6-296b-40b9-8a6d-b580adc87779"},{"type":"transaction","id":"80b7d72f-5328-4038-84ac-af9e625e7bcd"},{"type":"transaction","id":"e33cf4ef-d522-4a92-97a3-034187ac565d"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/2137742818\/invoices"},"data":[{"type":"invoice","id":"1948824785"},{"type":"invoice","id":"160797541"},{"type":"invoice","id":"1649010121"},{"type":"invoice","id":"803244157"},{"type":"invoice","id":"2023848175"},{"type":"invoice","id":"1736009537"},{"type":"invoice","id":"1659371739"},{"type":"invoice","id":"74606501"},{"type":"invoice","id":"1020651293"},{"type":"invoice","id":"854668440"},{"type":"invoice","id":"623662904"}]}}},{"type":"subscription","id":"1671699409","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/1671699409"},"attributes":{"mandate_code":"M58866545-4563320163-53294448779742","mandate_accepted":true,"mandate_accepted_date":"2019-10-28T16:44:48+01:00","start_date":"2019-10-28T00:00:00+01:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/257860\/M58866545-4563320163-53294448779742","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurring.local\/wc-api\/ecurring_return\/?order_id=20&key=wc_order_CMiE2HBvA3QOh","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-10-28T16:44:36+01:00","updated_at":"2019-10-28T16:45:03+01:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"757415917"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1671699409\/transactions"},"data":[{"type":"transaction","id":"32e2aa61-8c68-401c-bbe4-f365a233a1b7"},{"type":"transaction","id":"34a15a75-99b8-47f5-b10c-9062b2aac4c5"},{"type":"transaction","id":"177a28cd-a54f-435d-a125-bbbf21fd32b9"},{"type":"transaction","id":"1fc53954-53c5-4999-9e0f-406b9523da5e"},{"type":"transaction","id":"40a00df8-cca8-4bea-b0a3-d23471982bb2"},{"type":"transaction","id":"a8c3caa7-3826-4f71-b1fe-357daaa81494"},{"type":"transaction","id":"ef1b0aec-5994-4fdf-a9c8-e00e1acfa3ce"},{"type":"transaction","id":"c93c3156-efbb-40bf-bfda-257407b29fd8"},{"type":"transaction","id":"a7e985ab-0049-4add-9265-bb4f3c4b0115"},{"type":"transaction","id":"f8268531-7a14-4b2b-af50-d45804ed785f"},{"type":"transaction","id":"8092e58d-59db-4ba8-ab71-2734f694094a"},{"type":"transaction","id":"11779cb9-51ef-4aec-9892-e8803300c081"},{"type":"transaction","id":"17383b70-8cd1-49de-9c82-5d46fcab564c"},{"type":"transaction","id":"a6019d92-7471-437a-bd87-e38d077f3469"},{"type":"transaction","id":"f999ef27-dee6-405b-ae00-46c48078687d"},{"type":"transaction","id":"47a83cea-5f5f-4f6e-adb2-243ec7808e89"},{"type":"transaction","id":"54b8d6dc-2d66-4169-882c-1a7d4484b7fa"},{"type":"transaction","id":"bd4aeed2-3b2d-49cd-abb1-e683d0104b4b"},{"type":"transaction","id":"20c29113-0e18-4201-90ad-ffb32f0533cc"},{"type":"transaction","id":"9ce2a27b-2514-43c1-ba5e-e1e0a41343b8"},{"type":"transaction","id":"fd1f711d-457c-4b36-892a-29ab53603292"},{"type":"transaction","id":"23db734c-a6d0-4555-a339-752e22d49b60"},{"type":"transaction","id":"153cb8c2-5498-4775-9067-b1cf9a19a79e"},{"type":"transaction","id":"35957804-7be8-49cf-8ecc-7d3b60608c0f"},{"type":"transaction","id":"a2f47cb7-6bcd-45a2-8941-801b3718e810"},{"type":"transaction","id":"f8c920b5-04cd-4091-810d-ee36e854161e"},{"type":"transaction","id":"e68e25bb-e9c9-42e9-b1f1-3083e9504583"},{"type":"transaction","id":"d51ee1f7-c4bd-4454-9a7f-a28b454ffda2"},{"type":"transaction","id":"b99db3d4-909a-4358-a11d-5267743860bc"},{"type":"transaction","id":"dc3a4fa8-761d-4a9d-bcaf-668dd57f0561"},{"type":"transaction","id":"05f57a3b-eb9a-4064-9f1a-7158c581306d"},{"type":"transaction","id":"88f1a551-c4a1-450e-a451-f0d6af3b4619"},{"type":"transaction","id":"843a4207-2bbd-48ef-8ea5-46a02916bb2d"},{"type":"transaction","id":"8b51ded9-5ff5-44f8-b130-31dfec7068d3"},{"type":"transaction","id":"6fb88242-6317-460d-9ea6-5e80660dc464"},{"type":"transaction","id":"8723ac84-985b-41ca-baed-66662e55f7c9"},{"type":"transaction","id":"3f58790f-95a2-4327-8761-5fbba3243a13"},{"type":"transaction","id":"c7b76c78-66a5-4fb7-83d1-49c024056a36"},{"type":"transaction","id":"2e01f69a-11a0-4020-ae03-8bff606984bd"},{"type":"transaction","id":"3c33983d-b72a-4be6-97ad-613b874e1ff1"},{"type":"transaction","id":"f48b066a-1cb3-4aed-815a-39dd0db7507c"},{"type":"transaction","id":"2ef0688e-9a5d-431e-8e91-e095a88ffcde"},{"type":"transaction","id":"56ea4b40-efcb-403d-9881-80a1e073eb0a"},{"type":"transaction","id":"6ad8f3d9-2a35-4ba9-b3e5-65ddd9287ccd"},{"type":"transaction","id":"db2aee4f-0f1f-4990-8d20-27a6fe22a244"},{"type":"transaction","id":"bf3eb6b5-277d-40f9-a63c-c26f6d40ff87"},{"type":"transaction","id":"a9418d90-af76-4a06-a8a4-ff9b32a9b726"},{"type":"transaction","id":"5d63176f-bf99-4e2b-8a06-8d5460bce631"},{"type":"transaction","id":"733fabcc-deca-4954-9e0c-7dba4c84037c"},{"type":"transaction","id":"c5083762-756f-4e5f-a42e-4c763d9f0b1b"},{"type":"transaction","id":"13841385-ff59-49d1-b743-50eadeab23ea"},{"type":"transaction","id":"90723d15-f9bc-47c6-a00e-195d8adb0c1b"},{"type":"transaction","id":"7ea4e2f4-a2cc-4d5d-904b-972ce6a15b91"},{"type":"transaction","id":"c04cdcb6-6302-4046-9dd1-a5ee4e0d91af"},{"type":"transaction","id":"49daf720-8f7f-4aba-b4b0-15ce57191fd3"},{"type":"transaction","id":"5278f198-058e-4c25-970a-ccb4d58b05fb"},{"type":"transaction","id":"9a2291e9-7da4-4637-abaf-6065d333901d"},{"type":"transaction","id":"0f7b644f-9ea7-438c-a6f6-146588305f30"},{"type":"transaction","id":"9a5287f7-1de2-433a-bcc8-67cf020f06bf"},{"type":"transaction","id":"1f5717fb-7da7-47fa-b226-dd054f168622"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1671699409\/invoices"},"data":[{"type":"invoice","id":"455924973"},{"type":"invoice","id":"532321623"},{"type":"invoice","id":"1154449176"},{"type":"invoice","id":"2108895144"},{"type":"invoice","id":"551964262"},{"type":"invoice","id":"1605175374"},{"type":"invoice","id":"611669001"},{"type":"invoice","id":"485008478"},{"type":"invoice","id":"1400236922"},{"type":"invoice","id":"295312726"},{"type":"invoice","id":"498526990"}]}}},{"type":"subscription","id":"1033767052","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/1033767052"},"attributes":{"mandate_code":"M85166879-2491082208-82949125683336","mandate_accepted":true,"mandate_accepted_date":"2019-10-28T17:03:37+01:00","start_date":"2019-10-28T00:00:00+01:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/257871\/M85166879-2491082208-82949125683336","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurring.local\/wc-api\/ecurring_return\/?order_id=21&key=wc_order_trmqCb9g24fLe","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2019-10-28T17:03:28+01:00","updated_at":"2019-10-28T17:06:01+01:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"849268910"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1033767052\/transactions"},"data":[{"type":"transaction","id":"174607a9-c7e0-42b1-b24c-cad438ae857b"},{"type":"transaction","id":"bcfbc6ef-4a7e-40ce-9edd-6049255b0220"},{"type":"transaction","id":"a5317cf9-5968-4250-b596-67b86622ae4c"},{"type":"transaction","id":"c46e0d14-a33c-4c30-9f13-45e1eee5a6d6"},{"type":"transaction","id":"bfe39f72-b0ab-41d9-ae96-63699c3a623d"},{"type":"transaction","id":"14e053e9-fdcf-4df5-b7c3-4be01ab45721"},{"type":"transaction","id":"9eae7d99-395f-477f-b1af-67de40bdb77e"},{"type":"transaction","id":"f47d51c4-b7d2-492e-8c88-16b750b8247f"},{"type":"transaction","id":"6f16c120-757c-4ebf-9be5-73c538c1b0e5"},{"type":"transaction","id":"fd84ab9a-b806-4d63-9505-b85a95964828"},{"type":"transaction","id":"0e3590b8-e624-468b-b221-2247054a245d"},{"type":"transaction","id":"f685b81c-28d3-4f77-bc06-6b4b3b03a8bd"},{"type":"transaction","id":"03bd61e3-44bf-4816-a6d4-19db4bb79e1c"},{"type":"transaction","id":"43688b91-4560-4f8b-ae04-a2b8b978f7ca"},{"type":"transaction","id":"ba0ce8f8-82a8-4e65-80e8-200f1af2be7a"},{"type":"transaction","id":"751653d9-1e9d-4754-ab4e-b0177173683b"},{"type":"transaction","id":"f6cc1af2-0315-4e6b-aee9-a5e271324605"},{"type":"transaction","id":"ddd69542-9f57-43a5-a7cb-52e6013337b0"},{"type":"transaction","id":"bc478e93-82c2-451e-afe0-feb9fbe407dd"},{"type":"transaction","id":"0d80d736-1842-4a12-a3f4-5cd780c5aef4"},{"type":"transaction","id":"9b384b17-54e5-4f8a-b2cb-e1d1c56e5738"},{"type":"transaction","id":"9f8a17d4-60a9-4cb2-88c3-7007e5da0f49"},{"type":"transaction","id":"daef0101-21c0-42fa-9f6b-ee073f3b30a6"},{"type":"transaction","id":"dd46547f-4748-42d2-aacb-38f3a2f15af1"},{"type":"transaction","id":"7b4c6258-3286-4c64-b488-1aadb30a5a17"},{"type":"transaction","id":"73cde536-619a-4c67-9214-4ffde00a6017"},{"type":"transaction","id":"0daf7fc6-9de5-4430-a044-4f7b9938bdb0"},{"type":"transaction","id":"37756de7-71d2-460f-b49c-24823a71e112"},{"type":"transaction","id":"e8edbe49-48ff-4342-b296-92a5ac94b578"},{"type":"transaction","id":"0d0afb97-8ddb-4dd0-bdaf-53d373157f04"},{"type":"transaction","id":"3d938915-fc27-42f0-924d-8731598f5c66"},{"type":"transaction","id":"1619fa30-7e20-4be7-a9ec-b5da17832b15"},{"type":"transaction","id":"c2170334-136e-47df-bc99-f8f7ae0de6c4"},{"type":"transaction","id":"bb89f038-a36c-4517-80c4-9b9650e39d00"},{"type":"transaction","id":"97123f65-4f71-44f4-8f67-ef7b99242fc8"},{"type":"transaction","id":"cd516616-b1c7-424f-962c-140f3b208460"},{"type":"transaction","id":"17051aa2-4fef-41ec-a39d-06af2ef2110a"},{"type":"transaction","id":"1e935471-524e-42df-a645-ea85f991ff7c"},{"type":"transaction","id":"198923ce-c596-4c48-8276-d9685daa868f"},{"type":"transaction","id":"b15bc819-201c-454d-a889-64552960a7fe"},{"type":"transaction","id":"570facb5-9e9e-452c-b241-925c7801f07e"},{"type":"transaction","id":"fd8341cb-a715-4451-a425-152423357c3a"},{"type":"transaction","id":"b2a2da39-1f15-47a1-a249-d761fb2849be"},{"type":"transaction","id":"38f6ddc0-a206-4630-9ed9-3c756dd8c916"},{"type":"transaction","id":"62386463-fc42-483c-aca0-662704ec781c"},{"type":"transaction","id":"a0ec797e-fb52-4e6f-ad94-b1209621243e"},{"type":"transaction","id":"91bb448c-17db-412c-84fa-28859442e417"},{"type":"transaction","id":"04a09bd6-dbf0-4b94-b323-cec7f08d69e7"},{"type":"transaction","id":"88a42467-4660-4bd4-a69f-c5f476d74222"},{"type":"transaction","id":"00956ec1-03e1-45b1-b74d-ca910eebbdc0"},{"type":"transaction","id":"a2528ed8-69d9-4e97-b532-919551ec883c"},{"type":"transaction","id":"f9247b13-ae58-4479-9000-6f5b763906ad"},{"type":"transaction","id":"24bb1008-ad38-46b1-a0c4-7095f2322bfc"},{"type":"transaction","id":"9ab0b0e9-da97-4e6d-b574-af74fca70836"},{"type":"transaction","id":"7a98cf96-94fc-414f-a50e-613f29e7b71a"},{"type":"transaction","id":"49ae16f5-7697-4f66-b803-acf2eb7c4f52"},{"type":"transaction","id":"69d485f9-0c64-4b5f-888e-8118d5cea22e"},{"type":"transaction","id":"0d3fbeb9-ea13-477c-9860-97e9465ad565"},{"type":"transaction","id":"8a805c1a-d902-435d-9071-f45838e09a0c"},{"type":"transaction","id":"8fa1d08a-3fdb-453b-acda-774e37ed19a7"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1033767052\/invoices"},"data":[{"type":"invoice","id":"132588906"},{"type":"invoice","id":"852386507"},{"type":"invoice","id":"1446143418"},{"type":"invoice","id":"1468006338"},{"type":"invoice","id":"1204354743"},{"type":"invoice","id":"284128698"},{"type":"invoice","id":"422186175"},{"type":"invoice","id":"1670684636"},{"type":"invoice","id":"1327477438"},{"type":"invoice","id":"80339569"},{"type":"invoice","id":"616609080"}]}}}]}';
//        $data = $this->tableData($response);

        //$response = $this->apiHelper->apiCall('GET', 'https://api.ecurring.com/subscriptions/1052021136');
        $response = '{"links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/1052021136"},"data":{"type":"subscription","id":"1052021136","links":{"self":"https:\/\/api.ecurring.com\/subscriptions\/1052021136"},"attributes":{"mandate_code":"M87701107-2683685035-62036437937058","mandate_accepted":true,"mandate_accepted_date":"2020-09-24T11:45:25+02:00","start_date":"2020-09-24T00:00:00+02:00","status":"active","cancel_date":null,"resume_date":null,"confirmation_page":"https:\/\/app.ecurring.com\/mandate\/accept\/504435\/M87701107-2683685035-62036437937058","confirmation_sent":true,"subscription_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=subscription","transaction_webhook_url":"http:\/\/ecurring.local\/?ecurring-webhook=transaction","success_redirect_url":"http:\/\/ecurring.local\/wc-api\/ecurring_return\/?order_id=135&key=wc_order_dg2p6f4gcLPYN","metadata":{"source":"woocommerce"},"archived":false,"created_at":"2020-09-24T11:34:53+02:00","updated_at":"2020-09-24T11:48:02+02:00"},"relationships":{"subscription-plan":{"data":{"type":"subscription-plan","id":"642699160"}},"customer":{"data":{"type":"customer","id":"1927446587"}},"transactions":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1052021136\/transactions"},"data":[{"type":"transaction","id":"8e136d96-0c74-46c3-bc9b-c83b70066631"},{"type":"transaction","id":"557593bf-66ba-4c04-9256-85e84d6a26ae"},{"type":"transaction","id":"07f0bfbb-8775-48da-8693-20ee49d295f2"},{"type":"transaction","id":"25203ceb-12a7-4728-887c-89eec70d7aa6"},{"type":"transaction","id":"9391f926-b5b7-4d93-a2ac-70bc523068a2"},{"type":"transaction","id":"7d97deec-da00-4ae1-9074-bf4d52c37293"},{"type":"transaction","id":"d97e2ea3-9c42-41e0-a7c7-9233d4080890"},{"type":"transaction","id":"d078944b-3937-490f-afff-0794cdc494dd"},{"type":"transaction","id":"96bbf866-e68f-4b07-967c-db3e65ef13d7"},{"type":"transaction","id":"bca0b49f-6520-41b9-a028-74391ca22e9e"},{"type":"transaction","id":"5180f381-c482-4bec-a29d-5e808362c562"},{"type":"transaction","id":"f65995cf-f520-44a6-8943-4a78c74caa82"},{"type":"transaction","id":"2c3251d4-5a3b-40b8-85c2-cc9f2a971e59"},{"type":"transaction","id":"29271762-facf-47a2-aa48-b3a57afc3db5"},{"type":"transaction","id":"d401c789-256a-43ec-9dd3-42f52de914c4"},{"type":"transaction","id":"169cf28d-3ff2-4a9a-b7bf-9c7dfe1e3fbe"},{"type":"transaction","id":"00092547-7b88-4a1c-a992-4fd194128dbf"},{"type":"transaction","id":"f1e0f0be-ba93-4130-a9b5-3b15d80c65f6"},{"type":"transaction","id":"e2f8ab91-e04e-4572-8a66-c28a1215a277"},{"type":"transaction","id":"5e3be37f-fcc6-4677-a736-d4a610e4912d"},{"type":"transaction","id":"c3549228-0910-4d83-8eb5-ea281fd69fb3"},{"type":"transaction","id":"b89b305a-6184-4ab5-b7a6-3b265fd8e006"},{"type":"transaction","id":"61faa2f8-3a1d-40b5-94ba-8fa76043a254"},{"type":"transaction","id":"22611ec6-ce89-4228-ac6c-77e7ca6b7a91"},{"type":"transaction","id":"30dd6e13-d043-4991-8327-8e4ffd562a76"},{"type":"transaction","id":"5e385516-f819-4ec1-a0d9-0e37cdb2c191"},{"type":"transaction","id":"20b9420a-ea35-414e-8790-6f1e219fdf50"},{"type":"transaction","id":"eaff15aa-a03c-4025-ba98-645c718df64a"},{"type":"transaction","id":"653ca4fa-4d52-4aac-9aa1-aa607e5e4c95"},{"type":"transaction","id":"a32022f2-b06a-4fea-ae77-aa0f7a984527"},{"type":"transaction","id":"851a6890-9841-48f0-bf52-c068f04ec280"},{"type":"transaction","id":"12feac8f-9f01-41f1-b48d-c196a928b279"},{"type":"transaction","id":"feb8a93c-8d4b-40ba-a9a5-1cf8c50fc908"},{"type":"transaction","id":"bf0c5e39-0963-4cfd-83b7-53a764791e91"},{"type":"transaction","id":"8410370b-376c-4237-bc4c-83f400b7d7e0"},{"type":"transaction","id":"b67fa00b-aca3-4601-b8ba-968c4a439736"},{"type":"transaction","id":"efac9501-cd15-4245-8862-a1fbf4941d73"},{"type":"transaction","id":"314bc515-6283-48d7-9720-e712f301f120"},{"type":"transaction","id":"a17a2579-5f1e-462f-ba7d-e2cd71e9df1a"},{"type":"transaction","id":"c1ce4fd1-a33c-484d-9f36-540bba3a3340"},{"type":"transaction","id":"03878cd0-2319-46f6-a052-f4b35e13369d"},{"type":"transaction","id":"2ed5edd2-0b7f-40f5-8841-f5aa8c9e5604"},{"type":"transaction","id":"75ed23d3-2cda-4a2b-8a50-392b68f0733d"},{"type":"transaction","id":"a0253d96-f84e-419e-9bc3-c465b6518307"},{"type":"transaction","id":"70fe4468-5667-4df9-b914-75828eec720e"},{"type":"transaction","id":"eeb1b76f-4ee6-4e9a-92e7-7c9fe32a924e"},{"type":"transaction","id":"b1cb96e7-25d1-44d9-aa7f-b8ce8c9de442"},{"type":"transaction","id":"d376fe2b-cf54-401f-a1d5-3929e2b9d544"},{"type":"transaction","id":"3d7a8b87-4a54-4496-818f-293f17061873"},{"type":"transaction","id":"703dd189-1715-4bd5-b4c1-e04718860c1a"},{"type":"transaction","id":"267ccab6-61a9-422b-bfef-e6835dee6ea2"},{"type":"transaction","id":"f7a2bace-dfcf-416d-9afd-d970c9d8ecd3"},{"type":"transaction","id":"ed7c6aae-7856-4dd7-99cd-0172ad610cd1"},{"type":"transaction","id":"ca0d8f1b-2b37-4eca-a382-7d5e8f423967"},{"type":"transaction","id":"780da44d-efe6-46b9-868f-ad2f1c68a0ba"},{"type":"transaction","id":"fc3029ea-6aa7-4bbd-a2c5-3466d6e3dc36"},{"type":"transaction","id":"663377e5-e9a9-4f3b-9fcc-9316a4f1764a"},{"type":"transaction","id":"94621967-3304-4bb5-8b2b-8782288c59fa"},{"type":"transaction","id":"5d66c1b7-bf17-4ed2-8b42-831459f9b936"},{"type":"transaction","id":"5427f2f6-2255-4d88-b82f-1b93b6f86c80"}]},"invoices":{"links":{"related":"https:\/\/api.ecurring.com\/subscriptions\/1052021136\/invoices"},"data":[]}}}}';
        $data = $this->tableData($response);

        $perPage = 5;
        $currentPage = $this->get_pagenum();
        $totalItems = count($data);

        $this->set_pagination_args(array(
            'total_items' => $totalItems,
            'per_page' => $perPage
        ));

        $data = array_slice($data, (($currentPage - 1) * $perPage), $perPage);

        $this->_column_headers = array($columns, $hidden, $sortable);
        $this->items = $data;
    }

    /**
     * @return array|string[]
     */
    public function get_columns()
    {
        return [
            'id' => 'ID',
            'customer' => 'Customer',
            'item' => 'Item',
            'start_data' => 'Start Date',
            'order' => 'Order',
            'status' => 'Status',
        ];
    }

    /**
     * @return array
     */
    public function get_hidden_columns()
    {
        return [];
    }

    /**
     * @return array|array[]
     */
    public function get_sortable_columns()
    {
        return [
            'status' => ['status', false]
        ];
    }

    /**
     * @param object $item
     * @param string $column_name
     * @return string|true|void
     */
    public function column_default($item, $column_name)
    {
        switch ($column_name) {
            case 'id':
            case 'customer':
            case 'start_date':
            case 'order':
                return $item[$column_name];
            case 'status':
                return ucfirst($item[$column_name]);

            default:
                return print_r($item, true);
        }
    }

    /**
     * @param string $response
     * @return array
     */
    protected function tableData($response)
    {
        $data = [];
        $response = json_decode($response);

//        foreach ($response->data as $subscription) {
//            $data[] = [
//                'id' => $subscription->id,
//                'status' => $subscription->attributes->status,
//            ];
//        }

        $data[] = [
            'id' => $response->data->id,
            'customer' => $response->data->relationships->customer->data->id,
            'item' => 'item',
            'start_date' => 'start date',
            'order' => 'order',
            'status' => $response->data->attributes->status,
        ];

        return $data;
    }
}
